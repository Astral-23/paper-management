# テストの作成について

## 基本方針
- **品質の担保と安全な変更**: 新規機能の品質を保証し、既存機能の修正（リファクタリング）が他の箇所に悪影響を及ぼしていないこと（デグレード）を検知するためにテストを記述します。
- **テストの自動化**: 全てのテストは `npm test` コマンドで実行できるようにし、手動でのテスト工程を可能な限り削減します。
- **生きたドキュメント**: テストコードは、対象となる機能やコンポーネントが「どのように動作すべきか」を示す仕様書としての役割も担います。

## テストの種類と責務
品質を多角的に保証するため、以下のテストを記述します。

- **単体テスト (Unit Test)**
    - **対象**: 関数、モジュール、コンポーネントなどの最小単位。
    - **目的**: 個々の部品が持つロジックが単体で正しく動作することを検証します。外部の依存関係（API通信、データベースなど）はモック（偽の代替オブジェクト）に置き換えてテストします。
- **結合テスト (Integration Test)**
    - **対象**: 複数のモジュールやコンポーネントを組み合わせた機能。
    - **目的**: モジュール間の連携やデータの受け渡しが正しく行われるかを検証します。
- **E2Eテスト (End-to-End Test)**
    - **対象**: アプリケーション全体。
    - **目的**: 実際のユーザー操作をシミュレーションし、ログインから主要な機能の利用までの一連のシナリオが期待通りに動作することを検証します。

## テスト作成の具体的な指示
- **ドキュメントの生成**: 新しいテストを生成する際は、ドキュメントを先に生成します。
- **テストの追加**: 新しいコードを追加または既存のコードを修正する際には、必ず対応するテストコードも追加・修正します。バグ修正の際は、まずそのバグを再現するテストケースを追加し、そのテストが通るように修正を行います。
- **命名規則**: テストケース名は、`[テスト対象]_[テスト条件]_[期待される結果]` のように、そのテストの目的が明確に理解できる名前を付けます。
    - **具体例**: `calculatePrice_消費税10%の場合_税込価格が正しく計算される`
- **AAAパターン**: テストコードは、以下の3つのブロックに分けて記述することで、構造を明確にし可読性を高めます。
    1.  **Arrange (準備)**: テストに必要なデータやコンポーネントを準備します。
    2.  **Act (実行)**: テスト対象の関数やメソッドを実行します。
    3.  **Assert (検証)**: 実行結果が期待通りであるかを検証します。
- **テストカバレッジ**: 定期的にテストカバレッジを計測し、テストが不足している箇所を特定します。ただし、カバレッジ率100%を目的化するのではなく、重要なビジネスロジックや複雑な分岐が網羅されているかを重視します。

<br><br>

# 生成するドキュメントについて

TEST_DESIGN.mdをテストのためのドキュメントとします。ここでは、TEST_DESIGN.mdの書き方を説明します。
TEST_DESIGN.mdは次の2項目からなります。
1.  **テスト計画**: テストの戦略。
2.  **テスト設計**: テストの内容。
この2項目をテスト毎に記述していってください。
---

## 各項目の作成要件

### 1. テスト計画
作成するテストごとに、以下の項目を必ず含めてください。
- **テスト種別**: 単体テスト/結合テスト/E2Eテストのいずれかを記述
- **目的と範囲**: 何を、どこまでテストするのか。
- **テスト対象**: 対象となる機能や画面の一覧。


### 2. テスト設計
作成するテストごとに、以下の項目を必ず含めてください、
- **形式**: Markdownのテーブル形式で出力してください。
- **必須カラム**:
    - `テストの具体的な内容`
    - `操作手順`
    - `期待結果`

